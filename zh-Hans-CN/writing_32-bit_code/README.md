第八章: 编写 32 位代码(Unix， Win32， DJGPP)

本章主要介绍在编写运行在 Win32 或 Unix 下的 32 位代码，或与 Unix 风格的编译器，比如 DJGPP 连接的代码时，通常会碰到的一些问题。

这里包括如何编写与 32 位 C函数连接的汇编代码，如何为共享库编写地址无关的代码。

几乎所有的 32 位代码，即在实际使用中的所有运行在`Win32`，`DJGPP`和所有 PCUnix 变体都运行 在_flat_内存模式下。

这意味着段寄存器和页已经被正确设置，以给你一个统一的 32 位的 4Gb 的地址空间，而不管你当前工作在哪个段下，而且你应当完全忽略所有的段寄存器。

当写一个平坦(flat)模式的程序代码时，你从来不必使用段重载或改变段寄存器，而且你传给`CALL`，和`JMP`的代码段地址，你存取你的变量时使用的数据段地址，你存取局部变量和函数参数时的堆栈段地址实际上都在同一个地址空间中。

每一个地址都是 32 位长，只含有一个偏移域