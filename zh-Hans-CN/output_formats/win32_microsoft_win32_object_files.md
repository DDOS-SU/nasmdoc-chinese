6.3 `win32`: 微软 Win32 目标文件
======

`win32`输出格式产生微软 win32 目标文件，可以用来给微软连接器进行连接，比如Visual C++.注意 Borland Win32 编译器不使用这种格式，而是使用`obj`格式(参阅6.2)

`win32`提供缺省的输出文件扩展名`.obj`

注意，尽管微软声称 Win32 目标文件遵循`COFF`标准(通用目标文件格式)，但是微软的 Win32 编译器产生的目标文件和一些 COFF 连接器(比如 DJGPP)并不兼容，反过来也一样.这是由一些 PC 相关的语义上的差异造成的. 使用 NASM 的`coff`输出格式，可以产生能让 DJGPP 使用的 COFF 文件;

 而这种`coff`格式不能产生能让 Win32 连接器正确使用的代码.

6.3.1 `win32`对`SECTION`的扩展.
======

就象`obj`格式，`win32`允许你在`SECTION`操作符的行上指定附加的信息，以用来控制你声明的段的类型与属性.对于标准的段名`.text`，`.data`，和`.bss`，类型和属性是由 NASM 自动产生的，但是还是可以通过一些限定符来重新指定:可用的限定符如下:

*  `code`或者`text`，把一个段定义为一个代码段，这让这个段可读并可执行，但是不能写，同时也告诉连接器，段的类型是代码段.
*  `data`和`bss`定义一个数据段，类似`code`，数据段被标识为可读可写，但不可执行，`data`定义一个被初始化过的数据段，`bss`定义一个未初始化的数据段.
*  `rdata`声明一个初始化的数据段，它可读，但不能写.微软的编译器把它作为一个存放常量的地方.
*  `info`定义一个信息段，它不会被连接器放到可执行文件中去，但可以传递一些信息给连接器.比如，定义一个叫做`.drectve`信息段会让连接器把这个段内的内容解释为命令行选项.
*  `align=`跟上一个数字，就象在`obj`格式中一样，给出段的对齐请求.你最大可以指定 64:Win32 目标文件格式没有更大的段对齐值.如果对齐请求没有被显式指定，缺省情况下，对于代码段，是 16byte 对齐，对于只读数据段，是 8byte 对齐，对于数据段，是 4byte 对齐.而信息段缺省对齐是 1byte(即没有对齐)，所以对它来说，指定的数值没用.如果你没有指定上述的限定符，NASM 的缺省假设是:

```nasm
       section .text    code  align=16 
       section .data    data  align=4 
       section .rdata   rdata align=8 
       section .bss     bss   align=4
```

任何其的段名都会跟`.text`一样被对待.