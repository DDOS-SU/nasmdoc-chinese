9.1 混合 Size 的跳转.
======

最常用的混合 size 指令的形式是在写 32 位操作系统时用到的:在 16 位模式中完成你的设置，比如载入内核，然后你必须通过切入到保护模式中引导它，然后跳转到32 位的内核起始地址处.在一个完全 32 位的操作系统中，这是你唯一需要用到混合size 指令的地方，因为在它之间的所有事情都可以在纯 16 位代码中完成，而在它之后的所在事情都在纯 32 位代码中.这种跳转必须指定一个 48 位的远地址，因为目标段是一个 32 位段.但是，它必须在16 位段中被汇编，所以，仅仅如下面写代码:

```nasm
       jmp     0x1234:0x56789ABC       ; wrong!
```

不会正常工作，因为地址的偏移域部分会被截断成`0x9ABC`，然后，跳转会是一个普通的 16 位远跳转.Linux 内核的设置代码使用`as86`通过手工编码来产生这条指令，使用`DB`指令，NASM 可以比它更好些，可以自己产生正确的指令，这里是正确的做法:

```nasm
       jmp     dword 0x1234:0x56789ABC         ; right
```

`DWORD`前缀(严格地讲，它应该放在冒后的后面，因为它只是把偏移域声明为doubleword;

但是 NASM 接受任何一种形式，因为两种写法都是明确的)强制偏移域在假设你正从一个 16 段跳转到 32 位段的前提下，被处理为 far.你可以完成一个相反的操作，从一个 32 位段中跳转到一个 16 位段，使用`word`前缀:

```nasm
       jmp     word 0x8765:0x4321      ; 32 to 16 bit 
```

如果`WORD`前缀在 16 位模式下被指定，或者`DWORD`前缀在 32 位模式下被指定，它们都会被忽略，因为它们每一个都显式强制 NASM 进入一个已进进入的模式.
